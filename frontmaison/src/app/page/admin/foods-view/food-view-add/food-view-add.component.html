<div class="food-create-container">
  <h2>{{ food ? 'Edit Food Item' : 'Create New Food Item' }}</h2>

  <form [formGroup]="foodForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Name <span class="required">*</span></label>
      <input
        id="name"
        formControlName="name"
        class="form-control"
        placeholder="Enter food name"
      />
      <div *ngIf="(foodForm.get('name')?.touched || submitted) && foodForm.get('name')?.invalid" class="error">
        Name is required (minimum 3 characters)
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description <span class="required">*</span></label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
        placeholder="Enter food description"
      ></textarea>
      <div *ngIf="(foodForm.get('description')?.touched || submitted) && foodForm.get('description')?.invalid" class="error">
        Description is required (minimum 10 characters)
      </div>
    </div>

    <div class="form-group">
      <label for="category">Category <span class="required">*</span></label>
      <select id="category" formControlName="category" class="form-control">
        <option value="" disabled>Select a category</option>
        <option *ngFor="let category of categories" [value]="category">
          {{ getCategoryDisplayName(category) }}
        </option>
      </select>
      <div *ngIf="(foodForm.get('category')?.touched || submitted) && foodForm.get('category')?.invalid" class="error">
        Category is required
      </div>
    </div>

    <div class="form-group">
      <label for="price">Price ($) <span class="required">*</span></label>
      <input
        id="price"
        formControlName="price"
        type="number"
        step="0.01"
        min="0"
        class="form-control"
        placeholder="Enter price"
      />
      <div *ngIf="(foodForm.get('price')?.touched || submitted) && foodForm.get('price')?.invalid" class="error">
        Price is required and must be a positive number
      </div>
    </div>

    <div class="form-group">
      <label for="image">Image (optional)</label>
      <input
        id="image"
        type="file"
        (change)="onImagesSelected($event)"
        accept="image/jpeg,image/png,image/gif"
        class="form-control"
        multiple
      />
      <div *ngIf="selectedImageFiles.length > 0" class="file-preview">
  <div *ngFor="let file of selectedImageFiles">
    Selected file: {{ file.name }}
  </div>
</div>

      <div *ngIf="errorMessage && selectedImageFiles === undefined" class="error">
        {{ errorMessage }}
      </div>
    </div>

    <div class="form-group">
      <label for="preparationTime">Preparation Time (optional)</label>
      <input
        id="preparationTime"
        formControlName="preparationTime"
        class="form-control"
        placeholder="e.g., 15 minutes"
      />
    </div>

    <div class="form-group">
      <label for="spiceLevel">Spice Level (0â€“5, optional)</label>
      <input
        id="spiceLevel"
        formControlName="spiceLevel"
        type="number"
        min="0"
        max="5"
        class="form-control"
        placeholder="Enter spice level"
      />
      <div *ngIf="(foodForm.get('spiceLevel')?.touched || submitted) && foodForm.get('spiceLevel')?.invalid" class="error">
        Spice level must be between 0 and 5
      </div>
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" formControlName="isAvailable" /> Available
      </label>
    </div>

    <div class="form-actions">
      <button
        type="submit"
        [disabled]="foodForm.invalid || isSubmitting"
        class="btn btn-primary"
      >
        {{ isSubmitting ? 'Submitting...' : (food ? 'Update Food Item' : 'Create Food Item') }}
      </button>
      <button
        type="button"
        (click)="onCancel()"
        class="btn btn-secondary"
      >
        Cancel
      </button>
    </div>

    <div *ngIf="errorMessage && selectedImageFiles" class="error-message">
      {{ errorMessage }}
    </div>
  </form>
</div>
