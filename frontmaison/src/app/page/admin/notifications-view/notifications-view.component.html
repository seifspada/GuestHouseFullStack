<div class="notification-create-container">
  <h2>Créer une nouvelle notification</h2>

  <form [formGroup]="notificationForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="type">Type de notification</label>
      <select id="type" formControlName="type" class="form-control">
        <option value="" disabled>Sélectionnez un type</option>
        <option *ngFor="let type of notificationTypes" [value]="type">{{ type | titlecase }}</option>
      </select>
      <div *ngIf="notificationForm.get('type')?.touched && notificationForm.get('type')?.invalid" class="error">
        Le type est requis
      </div>
    </div>

    <div class="form-group">
      <label for="recipientGroup">Groupe de destinataires</label>
      <select id="recipientGroup" formControlName="recipientGroup" class="form-control">
        <option value="" disabled>Sélectionnez un groupe</option>
        <option *ngFor="let group of recipientGroups" [value]="group">{{ group | titlecase }}</option>
      </select>
      <div *ngIf="notificationForm.get('recipientGroup')?.touched && notificationForm.get('recipientGroup')?.invalid" class="error">
        Le groupe est requis
      </div>
    </div>

    <div class="form-group" *ngIf="notificationForm.get('recipientGroup')?.value === 'specific_guest'">
      <label for="specificGuestId">ID du client spécifique</label>
      <input id="specificGuestId" formControlName="specificGuestId" class="form-control" placeholder="Entrez l'ID du client">
      <div *ngIf="notificationForm.get('specificGuestId')?.touched && notificationForm.get('specificGuestId')?.invalid" class="error">
        L'ID du client est requis
      </div>
    </div>

    <div class="form-group">
      <label for="title">Titre</label>
      <input id="title" formControlName="title" class="form-control" placeholder="Entrez le titre">
      <div *ngIf="notificationForm.get('title')?.touched && notificationForm.get('title')?.invalid" class="error">
        Le titre est requis (minimum 3 caractères)
      </div>
    </div>

    <div class="form-group">
      <label for="message">Message</label>
      <textarea id="message" formControlName="message" class="form-control" placeholder="Entrez le message"></textarea>
      <div *ngIf="notificationForm.get('message')?.touched && notificationForm.get('message')?.invalid" class="error">
        Le message est requis (minimum 10 caractères)
      </div>
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" formControlName="isUrgent"> Notification urgente
      </label>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="notificationForm.invalid || isSubmitting" class="btn btn-primary">
        {{ isSubmitting ? 'Envoi en cours...' : 'Créer la notification' }}
      </button>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </form>
</div>